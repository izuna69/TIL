<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>명함</title>
    <!-- bootstrap v5.3.7 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/css/bootstrap.min.css"
      integrity="sha512-fw7f+TcMjTb7bpbLJZlP8g2Y4XcCyFZW8uy8HsRZsH/SwbMw0plKHFHr99DN3l04VsYNwvzicUX/6qurvIxbxw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- bootstrap icons v1.13.1 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" />
    <!-- custom style -->
    <style>
      /* 사용자 정의 스타일 */
    </style>
  </head>
  <body>
    <div class="container pt-5">
      <div class="mb-3">
        <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
          네임 카드 추가
        </button>
      </div>
      <!-- 등록 모달 -->
      <form name="addform">
        <div
          class="modal fade"
          id="exampleModal"
          tabindex="-1"
          role="dialog"
          aria-labelledby="exampleModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <!--모달본체-->
              <div class="modal-body">
                <div class="mb-3"><input type="text" id="company" class="form-control" placeholder="회사명" /></div>

                <div class="mb-3">
                  <select name="position" id="position" class="form-select">
                    <option value="사장">사장</option>

                    <option value="이사">이사</option>

                    <option value="부장">부장</option>

                    <option value="과장">과장</option>

                    <option value="대리">대리</option>

                    <option value="사원">사원</option>
                  </select>
                </div>

                <div class="mb-3">
                  <input type="text" id="name" class="form-control" placeholder="이름" />
                </div>
                <div class="mb-3">
                  <input type="tel" id="tel" class="form-control" placeholder="전화번호" />
                </div>
                <div class="mb-3">
                  <input type="email" id="email" class="form-control" placeholder="이메일" />
                </div>
                <div class="mb-3">
                  <input type="text" id="address" class="form-control" placeholder="주소" />
                </div>
              </div>

              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">취소</button>
                <button type="button" class="btn btn-primary" onclick="add();">등록</button>
              </div>
            </div>
          </div>
        </div>
      </form>
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3" id="nameCards"></div>
    </div>

    <!-- bootstrap v5.3.7 -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/js/bootstrap.bundle.min.js"
      integrity="sha512-Tc0i+vRogmX4NN7tuLbQfBxa8JkfUSAxSFVzmU31nVdHyiHElPPy2cWfFacmCJKw0VqovrzKhdd2TSTMdAxp2g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- jquery v3.7.1 -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-JobWAqYk5CSjWuVV3mxgS+MmccJqkrBaDhk8SKS1BW+71dJ9gzascwzW85UwGhxiSyR7Pxhu50k+Nl3+o5I49A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      let num = 1;

      // 짝수 구분 함수
      function isEven(i) {
        return i % 2 ? false : true;
      }

      // 추가
      function add() {
        // 모달창에서 입력된 값들 가져오기
        let company = document.getElementById("company").value || "(주)좋은사람들";
        let position = document.getElementById("position").value || "과장";
        let name = document.getElementById("name").value || "홍길동";
        let tel = document.getElementById("tel").value || "010-1234-5678";
        let email = document.getElementById("email").value || "hong@test.com";
        let address = document.getElementById("address").value || "서울시 서대문구 가좌로 134";
        let html = '<div class="col" id="nameCard' + num + '">';

        html += "<div>";

        // 텍스트 화면
        html += '<div class="card shadow-sm ';
        // 홀수에 배경 넣기
        if (!isEven(num)) html += "bg-light";

        html += '" id="cardText' + num + '">';
        html += '<div class="card-body">';
        html += '<p class="card-text">';
        html += '<div class="mb-3">';
        // 회사
        html += '<span id="companyText' + num + '">' + company + "</span>";
        html += "</div>";
        html += '<div class="mb-3">';
        // 직책
        html += '<span class="text-muted" id="positionText' + num + '">' + position + "</span>&nbsp;";
        // 이름
        html += '<span id="nameText' + num + '">' + name + "</span>";
        html += "</div>";
        html += '<div class="mb-3 d-flex justify-content-between">';
        html += "<div>";
        // 연락처
        html += '<span id="telText' + num + '">' + tel + "</span>";
        html += "</div>";
        html += "<div>";
        // 이메일
        html += '<span id="emailText' + num + '">' + email + "</span>";
        html += "</div>";
        html += "</div>";
        html += '<div class="mb-3">';
        // 주소
        html += '<span id="addressText' + num + '">' + address + "</span>";
        html += "</div>";
        html += "</p>";
        html += '<div class="d-flex justify-content-end">';
        html +=
          '<button type="button" class="btn btn-sm btn-outline-warning me-2" data-role="edit" onclick="edit(' +
          num +
          ')" id="btnEdit' +
          num +
          '">수정</button>';
        html +=
          '<button type="button" class="btn btn-sm btn-outline-danger" onclick="del(' +
          num +
          ')" id="btnDelete' +
          num +
          '">삭제</button>';
        html += "</div>";
        html += "</div>";
        html += "</div>";
        html += "</div>";

        // 수정 화면
        html += '<div class="card d-none shadow-sm ';

        // 홀수에 배경 넣기
        if (!isEven(num)) html += "bg-light";
        html += '" id="cardForm' + num + '">';
        html += '<div class="card-body">';
        html += '<p class="card-text">';
        // 회사
        html += '<div class="mb-3">';
        html += '<input type="text" id="companyInput' + num + '" class="form-control" value="' + company + '">';
        html += "</div>";
        // 직책
        html += '<div class="mb-3">';
        html += '<select id="positionSelect' + num + '" class="form-select">';
        html += '<option value="사장" ' + (position == "사장" ? "selected" : "") + ">사장</option>";
        html += '<option value="이사" ' + (position == "이사" ? "selected" : "") + ">이사</option>";
        html += '<option value="부장" ' + (position == "부장" ? "selected" : "") + ">부장</option>";
        html += '<option value="과장" ' + (position == "과장" ? "selected" : "") + ">과장</option>";
        html += '<option value="대리" ' + (position == "대리" ? "selected" : "") + ">대리</option>";
        html += '<option value="사원" ' + (position == "사원" ? "selected" : "") + ">사원</option>";
        html += "</select>";
        html += "</div>";
        // 이름
        html += '<div class="mb-3">';
        html += '<input type="text" id="nameInput' + num + '" class="form-control" value="' + name + '">';
        html += "</div>";
        // 연락처
        html += '<div class="mb-3">';
        html += '<input type="tel" id="telInput' + num + '" class="form-control" value="' + tel + '">';
        html += "</div>";
        // 이메일
        html += '<div class="mb-3">';
        html += '<input type="email" id="emailInput' + num + '" class="form-control" value="' + email + '">';
        html += "</div>";
        // 주소
        html += '<div class="mb-3">';
        html += '<input type="text" id="addressInput' + num + '" class="form-control" value="' + address + '">';
        html += "</div>";
        html += "</p>";
        html += '<div class="d-flex justify-content-end">';
        html +=
          '<button type="button" class="btn btn-sm btn-outline-success me-2" data-role="save" onclick="save(' +
          num +
          ')" id="btnSave' +
          num +
          '">저장</button>';
        html +=
          '<button type="button" class="btn btn-sm btn-outline-secondary" data-role="cancel" onclick="cancel(' +
          num +
          ')" id="btnCancel' +
          num +
          '">취소</button>';
        html += "</div>";
        html += "</div>";
        html += "</div>";
        html += "</div>";
        html += "</div>";

        document.getElementById("nameCards").innerHTML += html;
        num++;

        // 폼 초기화
        document.querySelector('form[name="addform"]').reset();
        // 모달 닫기
        exampleModal.hide();
      }

      const exampleModal = new bootstrap.Modal(document.getElementById("exampleModal"), {
        show: false,
        focus: true,
        backdrop: "static",
        keyboard: false,
      });
      //이벤트 리스너
      document.getElementById("exampleModal").addEventListener("show.bs.modal", (event) => {
        // 모달이 열릴 때 실행되는 코드
        document.querySelector('form[name="addform"]').reset(); // 폼 초기화
      });
      document.getElementById("exampleModal").addEventListener("hidden.bs.modal", (event) => {
        // 모달이 닫힐 때 실행되는 코드
        document.querySelector('form[name="addform"]').reset(); // 폼 초기화
      });

      // 삭제
      function del(id) {
        if (confirm("삭제하시겠습니까?")) document.getElementById("nameCard" + id).remove();
      }

      // 수정
      function edit(id) {
        document.getElementById("cardText" + id).classList.add("d-none");
        document.getElementById("cardForm" + id).classList.remove("d-none");
      }

      // 취소
      function cancel(id) {
        document.getElementById("cardText" + id).classList.remove("d-none");
        document.getElementById("cardForm" + id).classList.add("d-none");
      }

      // 저장
      function save(id) {
        // 입력값들을 텍스트에 업데이트
        document.getElementById("companyText" + id).innerText = document.getElementById("companyInput" + id).value;
        document.getElementById("positionText" + id).innerText = document.getElementById("positionSelect" + id).value;
        document.getElementById("nameText" + id).innerText = document.getElementById("nameInput" + id).value;
        document.getElementById("telText" + id).innerText = document.getElementById("telInput" + id).value;
        document.getElementById("emailText" + id).innerText = document.getElementById("emailInput" + id).value;
        document.getElementById("addressText" + id).innerText = document.getElementById("addressInput" + id).value;

        // 화면 전환
        document.getElementById("cardText" + id).classList.remove("d-none");
        document.getElementById("cardForm" + id).classList.add("d-none");
      }
    </script>
  </body>
</html>
